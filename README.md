Warpsys Package Buildplans
==========================

This repo contains build plans for a suite of packages we call "Warpsys".

These build plans are made to be evaluated with the Warpforge tool.
Evaluating them produces filesets, and puts the WareID (a content hash) of that fileset into a Warpforge Catalog.


### What are Warpsys and Warpforge and Catalogs?

Warpsys is a set of packages -- this repo is their sources.

Warpforge is the tooling used to build them.

A Catalog is the data structure and file format used by Warpforge to map human readable names and labels
onto machine-friendly WareIDs (filesystem snapshot content hashes) and metadata about them.

This repo builds the "warpsys catalog".


### Overall Directory Layout

- There's one very large directory called "modules", and one directory inside that for each module.
	- The big top-level directory is just to keep the repo root tidy.
	- Almost everything is in a flat namespace there.
	- A few modules have another path segment (for example, "modules/bootstrap/*" contains some more modules).  This is the exception, not the rule.
		- (Usually we use this when there's more than one thing with a very similar name.  For example, we have several "gcc" packages, which have varying levels of how well they're bootstrapped; we put the less excellent ones under the "bootstrap" group.)
- There's a directory called `.warpforge/`, which is the usual Warpforge workspace marker and config directory.
	- It's configured as a root workspace, because we consider Warpsys a pretty large project, and because we want it to be cleanly independent from other workspaces you may have on your system, if you're a Warpforge user in multiple contexts.
- FUTURE: there will probably be a directory full of starlark library files.
- FUTURE: there may be more directories with other hacking and maintinence assistance scripts.


### Files for each Module

Several kinds of files exist in here:

- `module.wf` files --
	- Always present.
	- These declare that there is a module.  (They say what the name is, mostly.)
- `plot.wf` files --
	- Always present.
	- These contain json that's a very literal build instruction which is handled by Warpforge.
	- Sometimes these are generated by other files.  (We still check them into git even when that's the case.)
- `plot.star` files
	- Sometimes present.
	- When present, these contain Starlark scripts that generate JSON, and they are used to generate the `plot.wf` file.  (The `warpforge plan generate` command does this.)

It's possible for some other small files to be heaped into the area (additional topic-local READMEs; patch files; etc).  There's no particular standard to those.


### Module names

Every module in this repo has a name starting with "warpsys.org".

The rest of the module name matches the filesystem: so,
for example, in the `./modules/gcc/module.wf` file, you'll see it declares a module name of "warpsys.org/gcc".
